<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="1568" height="1670" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[Note over Portal_BE: User selects\n "deploy to k8s"
Portal_BE->Camunda: POST /deploy \n{revId, userId, envId}
Camunda->CDS: POST /task \n {solId, revId,\n "taskCode": "DP",\n "statusCode": "IP", ...} 
Camunda->Portal_BE: 202 Accepted\n {taskId}
Note over Portal_BE: Monitor task/stepresult\n and update UI as needed 
Camunda->CDS: POST /task/stepresult \n {taskId, "name": "RTU",\n "statusCode": "IP", ...}
Note over Camunda: Process deployment RTU check
Camunda->CDS: POST /task/stepresult \n {taskId, "name": "RTU",\n "statusCode": "SU", ...}
Camunda->CDS: POST /task/stepresult \n {taskId, "name": "SV",\n "statusCode": "IP", ...} 
Note over Camunda: Process deployment SV check
Camunda->CDS: POST /task/stepresult \n {taskId, "name": "SV",\n "statusCode": "SU", ...} 
Camunda->Deployment\nClient: POST /deploy {"taskId": "<id>", "envId": "<id>"}
Deployment\nClient->CDS: POST /task/stepresult \n {taskId, "name": "DEP",\n "statusCode": "IP", ...} 
Note over Deployment\nClient: Create Jenkins job using base\n templates (simple, composite,\n nifi-pipeline) and deployment\n script in configmap 
Deployment\nClient->Jenkins: Create Jenkins job
Deployment\nClient->Jenkins: Start Jenkins job\n with parameters
Jenkins->Deployment\nClient: POST /deploy/<revisionId>/<jobId>\n {"status": "created"}
Note over Jenkins: Execute deployment script
Jenkins->Deployment\nClient: POST /deploy/<revisionId>/<jobId>\n\n {"status": "in-progress"}
Jenkins->k8s_Master: Create solution deployment
Jenkins->Deployment\nClient: POST /deploy/<revisionId>/<jobId>\n\n {"status": "complete",\n "ingress": "<url>"}
Deployment\nClient->CDS: POST /task/stepresult \n {taskId, "name": "DEP",\n "statusCode": "SU", ...} 
Deployment\nClient->CDS: PUT /task/<taskId>\n {"statusCode": "SU", ...}
]]></source><desc></desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"></g><g class="actor"><rect x="72.9296875" y="20" width="107.0625" height="58.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="82.9296875" y="54.59375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="82.9296875">Portal_BE</tspan></text></g><g class="actor"><rect x="72.9296875" y="1592.609375" width="107.0625" height="58.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="82.9296875" y="1627.203125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="82.9296875">Portal_BE</tspan></text></g><line x1="126.4609375" x2="126.4609375" y1="78.1875" y2="1592.609375" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="314.484375" y="20" width="87.796875" height="58.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="324.484375" y="54.59375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="324.484375">Camunda</tspan></text></g><g class="actor"><rect x="314.484375" y="1592.609375" width="87.796875" height="58.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="324.484375" y="1627.203125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="324.484375">Camunda</tspan></text></g><line x1="358.3828125" x2="358.3828125" y1="78.1875" y2="1592.609375" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="584.9375" y="20" width="49.265625" height="58.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="594.9375" y="54.59375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="594.9375">CDS</tspan></text></g><g class="actor"><rect x="584.9375" y="1592.609375" width="49.265625" height="58.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="594.9375" y="1627.203125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="594.9375">CDS</tspan></text></g><line x1="609.5703125" x2="609.5703125" y1="78.1875" y2="1592.609375" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="812.0390625" y="20" width="116.6875" height="58.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="822.0390625" y="45" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="822.0390625">Deployment</tspan><tspan dy="1.2em" x="822.0390625">Client</tspan></text></g><g class="actor"><rect x="812.0390625" y="1592.609375" width="116.6875" height="58.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="822.0390625" y="1617.609375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="822.0390625">Deployment</tspan><tspan dy="1.2em" x="822.0390625">Client</tspan></text></g><line x1="870.3828125" x2="870.3828125" y1="78.1875" y2="1592.609375" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="1164.234375" y="20" width="88.796875" height="58.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1175.234375" y="54.59375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1174.234375">Jenkins</tspan></text></g><g class="actor"><rect x="1164.234375" y="1592.609375" width="88.796875" height="58.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1175.234375" y="1627.203125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1174.234375">Jenkins</tspan></text></g><line x1="1208.6328125" x2="1208.6328125" y1="78.1875" y2="1592.609375" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="1420.6015625" y="20" width="117.6875" height="58.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1430.6015625" y="54.59375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1430.6015625">k8s_Master</tspan></text></g><g class="actor"><rect x="1420.6015625" y="1592.609375" width="117.6875" height="58.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1430.6015625" y="1627.203125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1430.6015625">k8s_Master</tspan></text></g><line x1="1479.4453125" x2="1479.4453125" y1="78.1875" y2="1592.609375" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="note"><rect x="49.21875" y="98.1875" width="154.484375" height="48.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="54.21875" y="118.1875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="54.21875">User selects</tspan><tspan dy="1.2em" x="54.21875">"deploy to k8s"</tspan></text></g><g class="signal"><text x="136.4609375" y="167.28125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="136.4609375">POST /deploy</tspan><tspan dy="1.2em" x="136.4609375">{revId, userId, envId}</tspan></text><line x1="126.4609375" x2="358.3828125" y1="204.5625" y2="204.5625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="368.3828125" y="206.265625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="368.3828125">POST /task</tspan><tspan dy="1.2em" x="368.3828125">{solId, revId,</tspan><tspan dy="1.2em" x="368.3828125">"taskCode": "DP",</tspan><tspan dy="1.2em" x="368.3828125">"statusCode": "IP", ...}</tspan></text><line x1="358.3828125" x2="609.5703125" y1="301.15625" y2="301.15625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="184.4453125" y="322.0625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="184.4453125">202 Accepted</tspan><tspan dy="1.2em" x="184.4453125">{taskId}</tspan></text><line x1="358.3828125" x2="126.4609375" y1="359.34375" y2="359.34375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="10" y="379.34375" width="232.921875" height="48.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="16" y="399.34375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="15">Monitor task/stepresult</tspan><tspan dy="1.2em" x="15">and update UI as needed</tspan></text></g><g class="signal"><text x="368.3828125" y="438.8359375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="368.3828125">POST /task/stepresult</tspan><tspan dy="1.2em" x="368.3828125">{taskId, "name": "RTU",</tspan><tspan dy="1.2em" x="368.3828125">"statusCode": "IP", ...}</tspan></text><line x1="358.3828125" x2="609.5703125" y1="504.921875" y2="504.921875" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="217.84375" y="524.921875" width="281.078125" height="29" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="222.84375" y="544.921875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="222.84375">Process deployment RTU check</tspan></text></g><g class="signal"><text x="368.3828125" y="565.2265625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="368.3828125">POST /task/stepresult</tspan><tspan dy="1.2em" x="368.3828125">{taskId, "name": "RTU",</tspan><tspan dy="1.2em" x="368.3828125">"statusCode": "SU", ...}</tspan></text><line x1="358.3828125" x2="609.5703125" y1="631.3125" y2="631.3125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="368.3828125" y="642.6171875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="368.3828125">POST /task/stepresult</tspan><tspan dy="1.2em" x="368.3828125">{taskId, "name": "SV",</tspan><tspan dy="1.2em" x="368.3828125">"statusCode": "IP", ...}</tspan></text><line x1="358.3828125" x2="609.5703125" y1="708.703125" y2="708.703125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="222.65625" y="728.703125" width="271.453125" height="29" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="227.65625" y="748.703125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="227.65625">Process deployment SV check</tspan></text></g><g class="signal"><text x="368.3828125" y="769.0078125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="368.3828125">POST /task/stepresult</tspan><tspan dy="1.2em" x="368.3828125">{taskId, "name": "SV",</tspan><tspan dy="1.2em" x="368.3828125">"statusCode": "SU", ...}</tspan></text><line x1="358.3828125" x2="609.5703125" y1="835.09375" y2="835.09375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="383.1953125" y="865.59375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="383.1953125">POST /deploy {"taskId": "&lt;id&gt;", "envId": "&lt;id&gt;"}</tspan></text><line x1="358.3828125" x2="870.3828125" y1="874.09375" y2="874.09375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="624.3828125" y="885.3984375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="624.3828125">POST /task/stepresult</tspan><tspan dy="1.2em" x="624.3828125">{taskId, "name": "DEP",</tspan><tspan dy="1.2em" x="624.3828125">"statusCode": "IP", ...}</tspan></text><line x1="870.3828125" x2="609.5703125" y1="951.484375" y2="951.484375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="725.5234375" y="971.484375" width="289.71875" height="86.59375" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="730.5234375" y="991.484375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="730.5234375">Create Jenkins job using base</tspan><tspan dy="1.2em" x="730.5234375">templates (simple, composite,</tspan><tspan dy="1.2em" x="730.5234375">nifi-pipeline) and deployment</tspan><tspan dy="1.2em" x="730.5234375">script in configmap</tspan></text></g><g class="signal"><text x="952.6328125" y="1088.578125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="952.6328125">Create Jenkins job</tspan></text><line x1="870.3828125" x2="1208.6328125" y1="1097.078125" y2="1097.078125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="957.9453125" y="1117.984375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="956.9453125">Start Jenkins job</tspan><tspan dy="1.2em" x="956.9453125">with parameters</tspan></text><line x1="870.3828125" x2="1208.6328125" y1="1155.265625" y2="1155.265625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="880.3828125" y="1176.171875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="880.3828125">POST /deploy/&lt;revisionId&gt;/&lt;jobId&gt;</tspan><tspan dy="1.2em" x="880.3828125">{"status": "created"}</tspan></text><line x1="1208.6328125" x2="870.3828125" y1="1213.453125" y2="1213.453125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="1083.0390625" y="1233.453125" width="251.1875" height="29" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1088.0390625" y="1253.453125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1088.0390625">Execute deployment script</tspan></text></g><g class="signal"><text x="880.3828125" y="1283.359375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="880.3828125">POST /deploy/&lt;revisionId&gt;/&lt;jobId&gt;</tspan><tspan dy="1.2em" x="880.3828125"></tspan><tspan dy="1.2em" x="880.3828125">{"status": "in-progress"}</tspan></text><line x1="1208.6328125" x2="870.3828125" y1="1320.640625" y2="1320.640625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="1218.6328125" y="1351.140625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1218.6328125">Create solution deployment</tspan></text><line x1="1208.6328125" x2="1479.4453125" y1="1359.640625" y2="1359.640625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="880.3828125" y="1370.9453125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="880.3828125">POST /deploy/&lt;revisionId&gt;/&lt;jobId&gt;</tspan><tspan dy="1.2em" x="880.3828125"></tspan><tspan dy="1.2em" x="880.3828125">{"status": "complete",</tspan><tspan dy="1.2em" x="880.3828125">"ingress": "&lt;url&gt;"}</tspan></text><line x1="1208.6328125" x2="870.3828125" y1="1437.03125" y2="1437.03125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="624.3828125" y="1448.3359375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="624.3828125">POST /task/stepresult</tspan><tspan dy="1.2em" x="624.3828125">{taskId, "name": "DEP",</tspan><tspan dy="1.2em" x="624.3828125">"statusCode": "SU", ...}</tspan></text><line x1="870.3828125" x2="609.5703125" y1="1514.421875" y2="1514.421875" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="619.5703125" y="1535.328125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="619.5703125">PUT /task/&lt;taskId&gt;</tspan><tspan dy="1.2em" x="619.5703125">{"statusCode": "SU", ...}</tspan></text><line x1="870.3828125" x2="609.5703125" y1="1572.609375" y2="1572.609375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g></svg>