Note over Portal_BE: User selects\n "deploy to k8s"
Portal_BE->Camunda: POST /deploy \n{solutionId, revisionId,\n userId, envId}
Camunda->CDS: POST /task \n {solId, revId,\n "taskCode": "DP",\n "statusCode": "IP", ...} 
Camunda->Portal_BE: 202 Accepted\n {taskId}
Note over Portal_BE: Monitor task/stepresult\n and update UI as needed 
Camunda->CDS: POST /task/stepresult \n {taskId, "name": "RTU",\n "statusCode": "IP", ...}
Note over Camunda: Process deployment RTU check
Camunda->CDS: POST /task/stepresult \n {taskId, "name": "RTU",\n "statusCode": "SU", ...}
Camunda->CDS: POST /task/stepresult \n {taskId, "name": "SV",\n "statusCode": "IP", ...} 
Note over Camunda: Process deployment SV check
Camunda->CDS: POST /task/stepresult \n {taskId, "name": "SV",\n "statusCode": "SU", ...} 
Camunda->Deployment\nClient: POST /deploy {"taskId": "<id>", "envId": "<id>"}
Deployment\nClient->Camunda: 202 Accepted
Deployment\nClient->CDS: POST /task/stepresult \n {taskId, "name": "DEP",\n "statusCode": "IP", ...} 
Note over Deployment\nClient: Create Jenkins job using base\n templates (simple, composite,\n nifi-pipeline) and deployment\n script in configmap 
Deployment\nClient->Jenkins: Create Jenkins job
Deployment\nClient->Jenkins: Start Jenkins job\n with parameters
Jenkins->Deployment\nClient: POST /status/<revisionId>/<jobId>\n {"status": "created"}
Note over Jenkins: Execute deployment script
Jenkins->Deployment\nClient: POST /status/<revisionId>/<jobId>\n\n {"status": "in-progress"}
Jenkins->k8s_Master: Create solution deployment
Jenkins->Deployment\nClient: POST /status/<revisionId>/<jobId>\n\n {"status": "complete",\n "ingress": "<url>"}
Deployment\nClient->CDS: POST /task/stepresult \n {taskId, "name": "DEP",\n "statusCode": "SU", ...} 
Deployment\nClient->CDS: PUT /task/<taskId>\n {"statusCode": "SU", ...}
